<div class="p-4 mx-auto " hx-ensure="#full-width-boxbuy:hidden">
    <!-- First Row: Staking Details and Rewards -->
    <div class="grid grid-cols-1 gap-4 md:grid-cols-2" hx-ext="htmx-ensure" hx-ensure="#full-width-boxbuy:hidden"
        hx-trigger="click">
        <!-- Staking Details Box -->
        <div class="p-4 border border-gray-300 rounded-lg">
            <div class="flex justify-between">
                <h2 class="text-[18px] font-medium leading-[17px] text-[#333333] mb-2">Egety
                    Mining EDS Investors
                    Rewards</h2>
<!--                <svg width="16" height="16" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">-->
<!--                    <g clip-path="url(#clip0_195_1446)">-->
<!--                        <path-->
<!--                            d="M0.1 6C0.1 2.73873 2.73903 0.1 6 0.1C9.26127 0.1 11.9 2.73903 11.9 6C11.9 9.26127 9.26097 11.9 6 11.9C2.73873 11.9 0.1 9.26092 0.1 6ZM0.737211 6C0.737211 8.90202 3.09801 11.2628 6 11.2628C8.90202 11.2628 11.2628 8.90202 11.2628 6C11.2628 3.09798 8.90202 0.737211 6 0.737211C3.09801 0.737211 0.737211 3.09798 0.737211 6Z"-->
<!--                            fill="black" stroke="#E5E9EB" stroke-width="0.2" />-->
<!--                        <path-->
<!--                            d="M5.90922 5.31716C5.68016 5.51457 5.38007 5.83841 5.38007 6.51763C5.38007 6.9283 5.49065 7.04677 5.81444 7.04677C6.20141 7.04677 6.2804 6.87303 6.2804 6.72294C6.2804 6.31227 6.2883 6.07534 6.72269 5.73573C6.93592 5.56988 7.60722 5.03281 7.60722 4.29043C7.60722 3.54805 6.93592 2.9873 5.92502 2.9873C4.8588 2.9873 4.36914 3.61916 4.36914 4.04562C4.36914 4.35364 4.62977 4.49581 4.843 4.49581C5.02263 4.49581 5.09578 4.38794 5.18047 4.26305C5.29686 4.09142 5.43503 3.88766 5.90132 3.88766C6.2962 3.88766 6.61213 4.06142 6.61213 4.42473C6.61213 4.77368 6.31601 5.00102 6.06559 5.19328C6.00996 5.23599 5.95659 5.27696 5.90922 5.31716ZM5.90922 5.31716L5.97392 5.39341C5.97401 5.39333 5.97411 5.39324 5.97421 5.39316M5.90922 5.31716L5.9745 5.3929C5.9744 5.39299 5.9743 5.39308 5.97421 5.39316M5.97421 5.39316C5.86414 5.48805 5.742 5.60912 5.64659 5.7845C5.55143 5.95942 5.48007 6.19359 5.48007 6.51763C5.48007 6.72096 5.50909 6.82041 5.55235 6.87182C5.59078 6.91749 5.65998 6.94677 5.81444 6.94677C5.99511 6.94677 6.08275 6.90597 6.12511 6.86729C6.16553 6.83038 6.1804 6.78091 6.1804 6.72294C6.1804 6.5207 6.18136 6.34066 6.24479 6.16817C6.3097 5.99168 6.43525 5.83351 6.6611 5.65695L6.66129 5.65679C6.7665 5.57496 6.97962 5.40533 7.16625 5.16754C7.35319 4.92935 7.50722 4.63083 7.50722 4.29043C7.50722 3.62376 6.9037 3.0873 5.92502 3.0873C4.89532 3.0873 4.46914 3.69139 4.46914 4.04562C4.46914 4.16797 4.51948 4.25241 4.58888 4.30838C4.66103 4.36657 4.75668 4.39581 4.843 4.39581C4.92005 4.39581 4.96427 4.37063 5.00383 4.33054C5.02584 4.30824 5.04688 4.28063 5.0708 4.24626C5.07852 4.23517 5.08702 4.22264 5.09603 4.20938C5.11264 4.18489 5.13096 4.1579 5.14913 4.13292C5.2087 4.051 5.28614 3.96202 5.40789 3.89506C5.5295 3.82817 5.68714 3.78766 5.90132 3.78766C6.11151 3.78766 6.31135 3.83363 6.46173 3.93773C6.61635 4.04478 6.71213 4.20942 6.71213 4.42473C6.71213 4.67626 6.58063 4.86819 6.42887 5.0189C6.35285 5.09439 6.26923 5.16206 6.19037 5.22335C6.1678 5.24089 6.14586 5.25774 6.12458 5.27408C6.06985 5.31609 6.0195 5.35474 5.97421 5.39316ZM5.32212 8.19983C5.32212 7.92167 5.54757 7.69172 5.82236 7.69172C6.09882 7.69172 6.33047 7.92337 6.33047 8.19983C6.33047 8.47013 6.10506 8.70798 5.82236 8.70798C5.54135 8.70798 5.32212 8.47187 5.32212 8.19983Z"-->
<!--                            fill="black" stroke="#E5E9EB" stroke-width="0.2" />-->
<!--                    </g>-->
<!--                    <defs>-->
<!--                        <clippath id="clip0_195_1446">-->
<!--                            <rect width="12" height="12" fill="white" />-->
<!--                        </clippath>-->
<!--                    </defs>-->
<!--                </svg>-->
            </div>
            <ul class="space-y-2">
                <li class="flex justify-between items-center bg-[#F3F5FF] p-2 rounded-md">
                    <div class="flex items-center">
                        <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="15" cy="15" r="14.5" fill="#054F85" stroke="#E5E9EB" />
                            <path d="M8 15.5L13 20.5L22 10" stroke="white" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <span class="pl-2 text-[20px] font-medium leading-[19px] text-[#04165B]">Daily
                            Rewards</span>
                    </div>
                    <!-- <span class="text-[18px] font-[400] leading-[17px] text-[#333333] ">1-1</span> -->
                </li>

                <li class="flex items-center bg-[#F3F5FF] p-2 rounded-md">
                    <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="15" cy="15" r="14.5" fill="#054F85" stroke="#E5E9EB" />
                        <path d="M8 15.5L13 20.5L22 10" stroke="white" stroke-width="2" stroke-linecap="round" />
                    </svg>
                    <span class="pl-2 text-[20px] font-medium leading-[19px] text-[#04165B]">
                        x2 Share Points 1st
                        Phase</span>
                </li>
                <li class="flex items-center bg-[#F3F5FF] p-2 rounded-md">
                    <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="15" cy="15" r="14.5" fill="#054F85" stroke="#E5E9EB" />
                        <path d="M8 15.5L13 20.5L22 10" stroke="white" stroke-width="2" stroke-linecap="round" />
                    </svg>
                    <span class="pl-2 text-[20px] font-medium leading-[19px] text-[#04165B]">
                        5% Cashback for
                        Investors</span>
                </li>
            </ul>
        </div>

        <!-- Rewards Box -->
        <div class="p-4 border border-gray-300 rounded-lg">
            <div class="flex justify-between">
                <h2 class="text-[18px] font-medium leading-[17px] text-[#333333] mb-2">Plen
                    Vida Members Rewards</h2>
<!--                <svg width="16" height="16" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">-->
<!--                    <g clip-path="url(#clip0_195_1446)">-->
<!--                        <path-->
<!--                            d="M0.1 6C0.1 2.73873 2.73903 0.1 6 0.1C9.26127 0.1 11.9 2.73903 11.9 6C11.9 9.26127 9.26097 11.9 6 11.9C2.73873 11.9 0.1 9.26092 0.1 6ZM0.737211 6C0.737211 8.90202 3.09801 11.2628 6 11.2628C8.90202 11.2628 11.2628 8.90202 11.2628 6C11.2628 3.09798 8.90202 0.737211 6 0.737211C3.09801 0.737211 0.737211 3.09798 0.737211 6Z"-->
<!--                            fill="black" stroke="#E5E9EB" stroke-width="0.2" />-->
<!--                        <path-->
<!--                            d="M5.90922 5.31716C5.68016 5.51457 5.38007 5.83841 5.38007 6.51763C5.38007 6.9283 5.49065 7.04677 5.81444 7.04677C6.20141 7.04677 6.2804 6.87303 6.2804 6.72294C6.2804 6.31227 6.2883 6.07534 6.72269 5.73573C6.93592 5.56988 7.60722 5.03281 7.60722 4.29043C7.60722 3.54805 6.93592 2.9873 5.92502 2.9873C4.8588 2.9873 4.36914 3.61916 4.36914 4.04562C4.36914 4.35364 4.62977 4.49581 4.843 4.49581C5.02263 4.49581 5.09578 4.38794 5.18047 4.26305C5.29686 4.09142 5.43503 3.88766 5.90132 3.88766C6.2962 3.88766 6.61213 4.06142 6.61213 4.42473C6.61213 4.77368 6.31601 5.00102 6.06559 5.19328C6.00996 5.23599 5.95659 5.27696 5.90922 5.31716ZM5.90922 5.31716L5.97392 5.39341C5.97401 5.39333 5.97411 5.39324 5.97421 5.39316M5.90922 5.31716L5.9745 5.3929C5.9744 5.39299 5.9743 5.39308 5.97421 5.39316M5.97421 5.39316C5.86414 5.48805 5.742 5.60912 5.64659 5.7845C5.55143 5.95942 5.48007 6.19359 5.48007 6.51763C5.48007 6.72096 5.50909 6.82041 5.55235 6.87182C5.59078 6.91749 5.65998 6.94677 5.81444 6.94677C5.99511 6.94677 6.08275 6.90597 6.12511 6.86729C6.16553 6.83038 6.1804 6.78091 6.1804 6.72294C6.1804 6.5207 6.18136 6.34066 6.24479 6.16817C6.3097 5.99168 6.43525 5.83351 6.6611 5.65695L6.66129 5.65679C6.7665 5.57496 6.97962 5.40533 7.16625 5.16754C7.35319 4.92935 7.50722 4.63083 7.50722 4.29043C7.50722 3.62376 6.9037 3.0873 5.92502 3.0873C4.89532 3.0873 4.46914 3.69139 4.46914 4.04562C4.46914 4.16797 4.51948 4.25241 4.58888 4.30838C4.66103 4.36657 4.75668 4.39581 4.843 4.39581C4.92005 4.39581 4.96427 4.37063 5.00383 4.33054C5.02584 4.30824 5.04688 4.28063 5.0708 4.24626C5.07852 4.23517 5.08702 4.22264 5.09603 4.20938C5.11264 4.18489 5.13096 4.1579 5.14913 4.13292C5.2087 4.051 5.28614 3.96202 5.40789 3.89506C5.5295 3.82817 5.68714 3.78766 5.90132 3.78766C6.11151 3.78766 6.31135 3.83363 6.46173 3.93773C6.61635 4.04478 6.71213 4.20942 6.71213 4.42473C6.71213 4.67626 6.58063 4.86819 6.42887 5.0189C6.35285 5.09439 6.26923 5.16206 6.19037 5.22335C6.1678 5.24089 6.14586 5.25774 6.12458 5.27408C6.06985 5.31609 6.0195 5.35474 5.97421 5.39316ZM5.32212 8.19983C5.32212 7.92167 5.54757 7.69172 5.82236 7.69172C6.09882 7.69172 6.33047 7.92337 6.33047 8.19983C6.33047 8.47013 6.10506 8.70798 5.82236 8.70798C5.54135 8.70798 5.32212 8.47187 5.32212 8.19983Z"-->
<!--                            fill="black" stroke="#E5E9EB" stroke-width="0.2" />-->
<!--                    </g>-->
<!--                    <defs>-->
<!--                        <clippath id="clip0_195_1446">-->
<!--                            <rect width="16" height="16" fill="white" />-->
<!--                        </clippath>-->
<!--                    </defs>-->
<!--                </svg>-->
            </div>
            <ul class="space-y-2">
                <li class="flex items-center bg-[#F3F5FF] p-2 rounded-md">
                    <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="15" cy="15" r="14.5" fill="#054F85" stroke="#E5E9EB" />
                        <path d="M8 15.5L13 20.5L22 10" stroke="white" stroke-width="2" stroke-linecap="round" />
                    </svg>
                    <span class="pl-2 text-[20px] font-medium leading-[19px] text-[#04165B]">
                        10% Direct Rewards</span>
                </li>
                <li class="flex items-center bg-[#F3F5FF] p-2 rounded-md">
                    <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="15" cy="15" r="14.5" fill="#054F85" stroke="#E5E9EB" />
                        <path d="M8 15.5L13 20.5L22 10" stroke="white" stroke-width="2" stroke-linecap="round" />
                    </svg>
                    <span class="pl-2 text-[20px] font-medium leading-[19px] text-[#04165B]">
                        10% Community
                        Rewards</span>
                </li>
                <li class="flex items-center bg-[#F3F5FF] p-2 rounded-md">
                    <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="15" cy="15" r="14.5" fill="#054F85" stroke="#E5E9EB" />
                        <path d="M8 15.5L13 20.5L22 10" stroke="white" stroke-width="2" stroke-linecap="round" />
                    </svg>
                    <span class="pl-2 text-[20px] font-medium leading-[19px] text-[#04165B]">5%
                        to 20% Team
                        Rewards</span>
                </li>
            </ul>
        </div>
    </div>

    <!-- Second Row: NFT Cards -->

    <div class="grid grid-cols-1 gap-4 mt-4 md:grid-cols-2">
        {{ $nftCount := 0}}
        {{ range .mining }}

        <div class="p-4 border border-gray-300 rounded-lg">
            <div class="flex">
                <div class="justify-start" id="nft-image-container{{.id}}">
                    <img src="{{$.basePath}}/img/{{.id}}.webp" alt="{{.name}}"
                        class="rounded-lg w-[125px] h-[109px] min-w-32 max-w-32 mb-4">
                </div>
                <div class="ml-2"> <!-- Reduced or removed margin -->
                    <h3 class="text-[22px] font-medium font-inter leading-[21.7px] text-[#333333]">{{.name}}</h3>
                    <p class="mt-3 mb-3 text-[18px] font-medium font-inter leading-[17px] text-[#8A8A8A]">
                        {{.description}}
                    </p>
                    <div class="flex">
                        {{ if gt .discount 0.0 }}

                        <p class="text-[18px] font-medium font-inter leading-[17px] text-[#374151] line-through">
                            {{FormatNumWithComma .price 0}}
                            eAI</p>
                        <p class="ml-3 text-[18px] font-medium font-inter leading-[17px] text-[#01259F]">{{
                            FormatNumWithComma
                            (multiply .price .discount) 0}}
                            eAI
                        </p>
                        {{else}}
                        <p class="ml-3 text-[18px] font-medium font-inter leading-[17px] text-[#01259F]">{{
                            FormatNumWithComma
                            .price 0}}
                            eAI
                        </p>
                        {{end}}
                    </div>
                </div>
            </div>
            <div class="flex justify-end">
                <button id="open-box" hx-ext="htmx-set,htmx-ensure" hx-ensure="#full-width-boxbuy:!hidden"
                    hx-set="#request_nft_name:{{.name}},,#request_nft_description:{{.description}},,#mnft_id:{{.id}},,#package_price:{{.price}}"
                    hx-trigger="click" hx-get="{{$.basePath}}/requestmnft/{{.id}}/{{$.User.eid}}" hx-swap="outerHTML"
                    hx-target="#nft-image-request" hx-indicator="#boxBuy-Indicator"
                    hx-on:htmx:after-request="initiateTab();"
                    class="bg-[#054F85] rounded-md text-[18px] text-white font-inter font-medium leading-[17px] px-4 py-2 cursor-pointer">
                    Buy This EDS
                </button>
            </div>
        </div>
        {{ $nftCount = addInt $nftCount 1 }}
        {{ end }}

    </div>

    <div id="full-width-boxbuy" hx-ensure="#full-width-boxbuy:!hidden"
        class="grid grid-cols-1 bg-white h-[90%] rounded-bl-lg rounded-tl-lg w-full md:w-[420px] fixed hidden max-h-[calc(99vh-100px)] md:max-h-[calc(100vh-130px)] overflow-y-auto right-0 top-0 md:top-[92px] z-[500] shadow-md">

        <div class="relative">
            <div id="boxBuy-Indicator" class="absolute top-0 left-0 z-10 w-full h-full backdrop-blur-md htmx-indicator">
                <div class="w-full h-full relative">
                    <div id="blurOverlaysD"
                        class="hidden absolute inset-0 backdrop-blur-[2px] flex items-center justify-center z-50">
                        <img id="imgLoadersD" src="{{.basePath}}/images/purchase/purlo1.svg"
                            class="w-[76px] h-[76px]" />
                    </div>
                </div>
                <script>
                    const imgLoadersD = document.getElementById("imgLoadersD");
                    const blurOverlaysD = document.getElementById("blurOverlaysD");
                    // const overlayRefresh = document.getElementById("overlayRefresh");
                    // const btnRefresh = overlayRefresh.querySelector("button");

                    const imgSourcessD = [
                        "{{.basePath}}/images/purchase/purlo1.svg",
                        "{{.basePath}}/images/purchase/purlo4.svg",
                        "{{.basePath}}/images/purchase/purlo3.svg",
                        "{{.basePath}}/images/purchase/purlo2.svg",
                    ];

                    async function startImageAnimationSD(cycles = 5) {
                        blurOverlaysD.classList.remove("hidden");
                        // overlayRefresh.classList.add("hidden");

                        for (let loop = 0; loop < cycles; loop++) {
                            blurOverlaysD.classList.remove("backdrop-none");
                            imgLoadersD.classList.remove("hidden");
                            console.log("Still Working ")
                            for (let i = 0; i < imgSourcessD.length; i++) {
                                imgLoadersD.src = imgSourcessD[i];
                                await new Promise((resolve) => setTimeout(resolve, 300));
                            }
                            blurOverlaysD.classList.add("backdrop-none");
                            imgLoadersD.classList.add("hidden");
                            await new Promise((resolve) => setTimeout(resolve, 500));
                        }

                        blurOverlaysD.classList.add("hidden");
                        // overlayRefresh.classList.remove("hidden");
                    }
                </script>
            </div>
            {{template "wonders/partials/desktop/purchase/boxbuyMining" .}}
        </div>
    </div>
</div>